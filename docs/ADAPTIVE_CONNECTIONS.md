# –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω—å

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –Ω–æ–≤–æ—ó –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—ó —Ç–∞ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –¥–æ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—É, Bluetooth —Ç–∞ Coaster –ø—Ä–∏—Å—Ç—Ä–æ—é.

## üéØ –û–≥–ª—è–¥

–ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –∑–∞–±–µ–∑–ø–µ—á—É—î:

- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —è–∫–æ—Å—Ç—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è
- **–†–µ–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - –º–∏—Ç—Ç—î–≤–∞ —Ä–µ–∞–∫—Ü—ñ—è –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É –ø—ñ–¥–∫–ª—é—á–µ–Ω—å
- **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–±–æ—Ä—É –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤
- **–†–æ–∑—É–º–Ω–∏–π —Ä–µ–∫–æ–Ω–µ–∫—Ç** - –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∏–π backoff –∑ jitter
- **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ** - –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è RSSI, —è–∫–æ—Å—Ç—ñ –º–µ—Ä–µ–∂—ñ, –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—ñ –∫–æ–º–∞–Ω–¥

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
src/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ adaptiveConnectionConfig.ts      # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ—Ñ—ñ–ª—ñ–≤
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useAdaptiveConnectionManager.ts  # –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ useAdaptiveBleScan.ts           # –ê–¥–∞–ø—Ç–∏–≤–Ω–µ BLE —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ useEnhancedConnectionStatus.ts  # –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å (–∑–≤–æ—Ä–æ—Ç–Ω–æ —Å—É–º—ñ—Å–Ω–∏–π)
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ ConnectionQualityIndicator/     # –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —è–∫–æ—Å—Ç—ñ
    ‚îî‚îÄ‚îÄ EnhancedConnectionStatus/        # –ü–æ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å –∑ UI

```

## üîß –ü—Ä–æ—Ñ—ñ–ª—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### 1. Standard (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π)
–ë–∞–∑–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–∏—Ö —É–º–æ–≤:
- –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è BLE: 10 —Å–µ–∫
- –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∫–æ–Ω–µ–∫—Ç—ñ–≤: 5
- –¢–∞–π–º–∞—É—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: 10 —Å–µ–∫
- RSSI –ø–æ—Ä—ñ–≥: -80 dBm

### 2. Aggressive (–ê–≥—Ä–µ—Å–∏–≤–Ω–∏–π)
–î–ª—è —Å–ª–∞–±–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É –∞–±–æ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è:
- –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è BLE: 20 —Å–µ–∫ (–¥–æ–≤—à–µ)
- –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∫–æ–Ω–µ–∫—Ç—ñ–≤: 10 (–±—ñ–ª—å—à–µ —Å–ø—Ä–æ–±)
- –¢–∞–π–º–∞—É—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: 15 —Å–µ–∫
- RSSI –ø–æ—Ä—ñ–≥: -90 dBm (–Ω–∏–∂—á–∏–π)

### 3. Fast (–®–≤–∏–¥–∫–∏–π)
–î–ª—è –≤—ñ–¥–º—ñ–Ω–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É:
- –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è BLE: 5 —Å–µ–∫ (—à–≤–∏–¥—à–µ)
- –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∫–æ–Ω–µ–∫—Ç—ñ–≤: 3
- –¢–∞–π–º–∞—É—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è: 5 —Å–µ–∫
- RSSI –ø–æ—Ä—ñ–≥: -70 dBm

### 4. Battery Saver (–ï–∫–æ–Ω–æ–º—ñ—è –±–∞—Ç–∞—Ä–µ—ó)
–ï–Ω–µ—Ä–≥–æ–∑–±–µ—Ä—ñ–≥–∞—é—á–∏–π —Ä–µ–∂–∏–º:
- –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è BLE: 8 —Å–µ–∫
- –ú–∞–∫—Å–∏–º—É–º —Ä–µ–∫–æ–Ω–µ–∫—Ç—ñ–≤: 3
- –î–æ–≤–≥—ñ –ø–∞—É–∑–∏ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏ (60 —Å–µ–∫ –º–∞–∫—Å)
- –†—ñ–¥–∫—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (2 —Ö–≤)

## üìä –†—ñ–≤–Ω—ñ —è–∫–æ—Å—Ç—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

| –Ø–∫—ñ—Å—Ç—å | RSSI (BLE) | –û–ø–∏—Å |
|--------|-----------|------|
| **Excellent** (–í—ñ–¥–º—ñ–Ω–Ω–æ) | ‚â• -60 dBm | –Ü–¥–µ–∞–ª—å–Ω–∏–π —Å–∏–≥–Ω–∞–ª |
| **Good** (–î–æ–±—Ä–µ) | -60 –¥–æ -70 dBm | –ì–∞—Ä–Ω–∏–π —Å–∏–≥–Ω–∞–ª |
| **Fair** (–ó–∞–¥–æ–≤—ñ–ª—å–Ω–æ) | -70 –¥–æ -80 dBm | –ü—Ä–∏–π–Ω—è—Ç–Ω–∏–π —Å–∏–≥–Ω–∞–ª |
| **Poor** (–ü–æ–≥–∞–Ω–æ) | -80 –¥–æ -90 dBm | –°–ª–∞–±–∫–∏–π —Å–∏–≥–Ω–∞–ª |
| **Critical** (–ö—Ä–∏—Ç–∏—á–Ω–æ) | < -90 dBm | –î—É–∂–µ —Å–ª–∞–±–∫–∏–π —Å–∏–≥–Ω–∞–ª |

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–∑–≤–æ—Ä–æ—Ç–Ω–æ —Å—É–º—ñ—Å–Ω–µ)

```typescript
import { useConnectionStatus } from '../hooks/useEnhancedConnectionStatus';

function MyComponent() {
  const status = useConnectionStatus();

  // –ü—Ä–∞—Ü—é—î —è–∫ —Å—Ç–∞—Ä–∏–π API
  if (!status.internet.isConnected) {
    return <Text>{status.internet.message}</Text>;
  }

  if (!status.coaster.isConnected) {
    return <Text>{status.coaster.message}</Text>;
  }

  return <Text>–í—Å–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!</Text>;
}
```

### –†–æ–∑—à–∏—Ä–µ–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —è–∫—ñ—Å—Ç—é

```typescript
import { useEnhancedConnectionStatus } from '../hooks/useEnhancedConnectionStatus';

function MyComponent() {
  const status = useEnhancedConnectionStatus();

  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ
  if (status.quality.ble === 'poor' || status.quality.ble === 'critical') {
    return <Text>–°–ª–∞–±–∫–∏–π BLE —Å–∏–≥–Ω–∞–ª: {status.details.ble.rssi} dBm</Text>;
  }

  // –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ä–µ–∫–æ–Ω–µ–∫—Ç
  if (status.details.ble.isReconnecting) {
    return (
      <Text>
        –ü–µ—Ä–µ–∫–æ–Ω–µ–∫—Ç... —Å–ø—Ä–æ–±–∞ {status.details.ble.reconnectAttempt}
      </Text>
    );
  }

  return <Text>–Ø–∫—ñ—Å—Ç—å BLE: {status.quality.ble}</Text>;
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ BLE —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è

```typescript
import { useAdaptiveBleScan } from '../hooks/useAdaptiveBleScan';

function MyComponent() {
  const ble = useAdaptiveBleScan();

  const handleScan = () => {
    ble.startScan();
  };

  return (
    <View>
      <Text>–ü–æ—Ç–æ—á–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è: {ble.currentScanDuration}–º—Å</Text>
      <Text>–Ø–∫—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω–Ω—è: {ble.connectionQuality}</Text>
      <Text>RSSI: {ble.rssi} dBm</Text>

      {ble.isReconnecting && (
        <Text>
          –†–µ–∫–æ–Ω–µ–∫—Ç {ble.reconnectAttempt}/{ble.maxReconnectAttempts}
        </Text>
      )}

      <Button onPress={handleScan} title="–°–∫–∞–Ω—É–≤–∞—Ç–∏" />
    </View>
  );
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω—å

```typescript
import { useAdaptiveConnectionManager } from '../hooks/useAdaptiveConnectionManager';

function MyComponent() {
  const manager = useAdaptiveConnectionManager();

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
  const switchToAggressive = () => {
    manager.switchProfile('aggressive');
  };

  // –í–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è
  const disableAuto = () => {
    manager.setAutoProfileSwitch(false);
  };

  // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–¥—ñ—ó
  useEffect(() => {
    const unsubscribe = manager.addEventListener((event) => {
      if (event.type === 'ble_disconnected') {
        console.log('BLE –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ:', event.reason);
      }

      if (event.type === 'profile_switched') {
        console.log(`–ü—Ä–æ—Ñ—ñ–ª—å –∑–º—ñ–Ω–µ–Ω–æ: ${event.from} ‚Üí ${event.to}`);
        console.log(`–ü—Ä–∏—á–∏–Ω–∞: ${event.reason}`);
      }
    });

    return unsubscribe;
  }, [manager]);

  return (
    <View>
      <Text>–ü–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å: {manager.currentProfile.name}</Text>
      <Button onPress={switchToAggressive} title="–ê–≥—Ä–µ—Å–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º" />
    </View>
  );
}
```

### –ì–æ—Ç–æ–≤–∏–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
import { EnhancedConnectionStatus } from '../components/EnhancedConnectionStatus';

function MyScreen() {
  return (
    <View>
      {/* –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π —Ä–µ–∂–∏–º */}
      <EnhancedConnectionStatus compact />

      {/* –ü–æ–≤–Ω–∏–π —Ä–µ–∂–∏–º –∑ –≤–∏–±–æ—Ä–æ–º –ø—Ä–æ—Ñ—ñ–ª—é */}
      <EnhancedConnectionStatus showProfileSelector />
    </View>
  );
}
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—î –ø—Ä–æ—Ñ—ñ–ª—ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ:

1. **–Ø–∫–æ—Å—Ç—ñ BLE —Å–∏–≥–Ω–∞–ª—É** - —è–∫—â–æ RSSI –ø–∞–¥–∞—î –Ω–∏–∂—á–µ –ø–æ—Ä–æ–≥—É
2. **–ö—ñ–ª—å–∫–æ—Å—Ç—ñ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–∫–∞–Ω—É–≤–∞–Ω—å** - —è–∫—â–æ < 50% —É—Å–ø—ñ—à–Ω–∏—Ö
3. **–ö—ñ–ª—å–∫–æ—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å** - —è–∫—â–æ > 3 –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
4. **–£—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ –∫–æ–º–∞–Ω–¥** - —è–∫—â–æ < 95% —É—Å–ø—ñ—à–Ω–∏—Ö –∫–æ–º–∞–Ω–¥

### –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è:

```
–ö—Ä–∏—Ç–∏—á–Ω—ñ —É–º–æ–≤–∏ ‚Üí –ê–≥—Ä–µ—Å–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å
  - BLE —è–∫—ñ—Å—Ç—å: poor/critical
  - –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è < 50%
  - –ë—ñ–ª—å—à–µ 3 –≤—ñ–¥–∫–ª—é—á–µ–Ω—å

–í—ñ–¥–º—ñ–Ω–Ω—ñ —É–º–æ–≤–∏ ‚Üí –®–≤–∏–¥–∫–∏–π –ø—Ä–æ—Ñ—ñ–ª—å
  - BLE —è–∫—ñ—Å—Ç—å: excellent
  - –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è > 90%
  - –£—Å–ø—ñ—à–Ω—ñ—Å—Ç—å –∫–æ–º–∞–Ω–¥ > 95%
  - –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç: excellent

–Ü–Ω—à—ñ –≤–∏–ø–∞–¥–∫–∏ ‚Üí –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å
```

## üìà –†–æ–∑—É–º–Ω–∏–π —Ä–µ–∫–æ–Ω–µ–∫—Ç

### –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–∏–π backoff –∑ jitter

–ó–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏ –∑—Ä–æ—Å—Ç–∞—î –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–æ:

```
–°–ø—Ä–æ–±–∞ 1: 1 —Å–µ–∫ ¬± 30% jitter
–°–ø—Ä–æ–±–∞ 2: 2 —Å–µ–∫ ¬± 30% jitter
–°–ø—Ä–æ–±–∞ 3: 4 —Å–µ–∫ ¬± 30% jitter
–°–ø—Ä–æ–±–∞ 4: 8 —Å–µ–∫ ¬± 30% jitter
–°–ø—Ä–æ–±–∞ 5: 16 —Å–µ–∫ ¬± 30% jitter
```

Jitter (–≤–∏–ø–∞–¥–∫–æ–≤—ñ—Å—Ç—å) –¥–æ–¥–∞—î—Ç—å—Å—è –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è "thundering herd" –ø—Ä–æ–±–ª–µ–º–∏, –∫–æ–ª–∏ –±–∞–≥–∞—Ç–æ –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –ø–µ—Ä–µ–∫–æ–Ω–µ–∫—Ç–∏—Ç–∏—Å—è.

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –∑–º—ñ–Ω—é—î —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ—Å—Ç–æ—Ä—ñ—ó:

- **–Ø–∫—â–æ —á–∞—Å—Ç–æ –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏–º–æ** ‚Üí –∑–±—ñ–ª—å—à—É—î–º–æ –¥–æ 2—Ö (–º–∞–∫—Å 30 —Å–µ–∫)
- **–Ø–∫—â–æ —à–≤–∏–¥–∫–æ –∑–Ω–∞—Ö–æ–¥–∏–º–æ** ‚Üí –∑–º–µ–Ω—à—É—î–º–æ –¥–æ 0.7—Ö (–º—ñ–Ω 5 —Å–µ–∫)

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–°–∏—Å—Ç–µ–º–∞ –∑–±–∏—Ä–∞—î –¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

### BLE:
- –£—Å–ø—ñ—à–Ω—ñ/–Ω–µ–≤–¥–∞–ª—ñ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è
- –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è
- –û—Å—Ç–∞–Ω–Ω—ñ–π RSSI
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
- –Ø–∫—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω–Ω—è

### Internet:
- –°—Ç–∞—Ç—É—Å (–æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω)
- –¢–∏–ø –º–µ—Ä–µ–∂—ñ (WiFi, Cellular, Ethernet)
- –ó–∞–≥–∞–ª—å–Ω–∏–π downtime
- –Ø–∫—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω–Ω—è

### Coaster:
- –£—Å–ø—ñ—à–Ω—ñ/–Ω–µ–≤–¥–∞–ª—ñ –∫–æ–º–∞–Ω–¥–∏
- –°–µ—Ä–µ–¥–Ω—è –ª–∞—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª—É

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### ConnectionQualityIndicator

–ü–æ–∫–∞–∑—É—î —è–∫—ñ—Å—Ç—å –æ–∫—Ä–µ–º–æ–≥–æ —Ç–∏–ø—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:

```typescript
<ConnectionQualityIndicator
  type="ble"
  quality="good"
  rssi={-65}
  isConnected={true}
  isReconnecting={false}
  compact={false}
/>
```

### EnhancedConnectionStatus

–ü–æ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö –ø—ñ–¥–∫–ª—é—á–µ–Ω—å + –≤–∏–±—ñ—Ä –ø—Ä–æ—Ñ—ñ–ª—é + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

```typescript
<EnhancedConnectionStatus
  showProfileSelector={true}
  compact={false}
/>
```

## üîå –ü–æ–¥—ñ—ó (Events)

–ü—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –ø–æ–¥—ñ—ó –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏:

```typescript
const manager = useAdaptiveConnectionManager();

manager.addEventListener((event) => {
  switch (event.type) {
    case 'ble_scan_started':
      console.log(`–°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –ø–æ—á–∞–ª–æ—Å—å: ${event.scanDuration}–º—Å`);
      break;

    case 'ble_scan_completed':
      console.log(`–ó–Ω–∞–π–¥–µ–Ω–æ ${event.devicesFound} –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ –∑–∞ ${event.duration}–º—Å`);
      break;

    case 'ble_connected':
      console.log(`–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ ${event.deviceId}, RSSI: ${event.rssi}`);
      break;

    case 'ble_disconnected':
      console.log(`–í—ñ–¥–∫–ª—é—á–µ–Ω–æ: ${event.reason}`);
      break;

    case 'ble_reconnect_scheduled':
      console.log(`–†–µ–∫–æ–Ω–µ–∫—Ç —Å–ø—Ä–æ–±–∞ ${event.attempt} —á–µ—Ä–µ–∑ ${event.delay}–º—Å`);
      break;

    case 'internet_online':
      console.log(`–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç –æ–Ω–ª–∞–π–Ω: ${event.networkType}, —è–∫—ñ—Å—Ç—å: ${event.quality}`);
      break;

    case 'internet_offline':
      console.log(`–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç –æ—Ñ–ª–∞–π–Ω: ${event.downtime}–º—Å`);
      break;

    case 'coaster_command_success':
      console.log(`–ö–æ–º–∞–Ω–¥–∞ —É—Å–ø—ñ—à–Ω–∞, –ª–∞—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å: ${event.latency}–º—Å`);
      break;

    case 'profile_switched':
      console.log(`–ü—Ä–æ—Ñ—ñ–ª—å –∑–º—ñ–Ω–µ–Ω–æ: ${event.from} ‚Üí ${event.to}`);
      console.log(`–ü—Ä–∏—á–∏–Ω–∞: ${event.reason}`);
      break;
  }
});
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤:

1. **–°–ª–∞–±–∫–∏–π —Å–∏–≥–Ω–∞–ª** - –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∞–≥—Ä–µ—Å–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –≤—Ä—É—á–Ω—É
2. **–í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** - –≤—ñ–¥–∫–ª—é—á—ñ—Ç—å Bluetooth/WiFi —ñ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π—Ç–µ –∑–∞ —Ä–µ–∫–æ–Ω–µ–∫—Ç–æ–º
3. **–ê–≤—Ç–æ–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è** - —É–≤—ñ–º–∫–Ω—ñ—Ç—å auto —Ä–µ–∂–∏–º —ñ –∑–º—ñ–Ω—é–π—Ç–µ —É–º–æ–≤–∏

```typescript
// –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≥—Ä–µ—Å–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é
manager.switchProfile('aggressive');

// –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è
manager.setAutoProfileSwitch(true);

// –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
console.log(manager.state.stats);
```

## üÜö –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑—ñ —Å—Ç–∞—Ä–æ—é —Å–∏—Å—Ç–µ–º–æ—é

| –§—É–Ω–∫—Ü—ñ—è | –°—Ç–∞—Ä–∞ —Å–∏—Å—Ç–µ–º–∞ | –ù–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ |
|---------|--------------|--------------|
| BLE —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è | 10 —Å–µ–∫ (–∂–æ—Ä—Å—Ç–∫–æ) | 5-30 —Å–µ–∫ (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ) |
| –†–µ–∫–æ–Ω–µ–∫—Ç —Å–ø—Ä–æ–± | 3 | 3-10 (–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø—Ä–æ—Ñ—ñ–ª—é) |
| –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ | –ù—ñ | –¢–∞–∫ (RSSI, network quality) |
| –ü—Ä–æ—Ñ—ñ–ª—ñ | –ù—ñ | 4 –ø—Ä–æ—Ñ—ñ–ª—ñ |
| –ê–≤—Ç–æ–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è | –ù—ñ | –¢–∞–∫ |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ | –ü–æ–≤–Ω–∞ |
| Jitter –≤ backoff | –ù—ñ | –¢–∞–∫ (¬±30%) |
| –ü–æ–¥—ñ—ó | –ù—ñ | –¢–∞–∫ (11 —Ç–∏–ø—ñ–≤ –ø–æ–¥—ñ–π) |

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–î–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤** - –∑–∞–ª–∏—à—Ç–µ `auto` —Ä–µ–∂–∏–º —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º
2. **–î–ª—è —Å–ª–∞–±–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É** - –≤—Ä—É—á–Ω—É –ø–µ—Ä–µ–∫–ª—é—á—ñ—Ç—å –Ω–∞ `aggressive`
3. **–î–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó –±–∞—Ç–∞—Ä–µ—ó** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `batterySaver` –ø—Ä–æ—Ñ—ñ–ª—å
4. **–î–ª—è –¥–µ–±–∞–≥—É** - –ø—ñ–¥–ø–∏—à—ñ—Ç—å—Å—è –Ω–∞ –≤—Å—ñ –ø–æ–¥—ñ—ó —Ç–∞ –ª–æ–≥—É–π—Ç–µ —ó—Ö

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏—Å—Ç—Ä—ñ–π –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É BLE —Å–∫–∞–Ω—É–≤–∞–Ω—å
2. –ó–±—ñ–ª—å—à—Ç–µ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è (aggressive –ø—Ä–æ—Ñ—ñ–ª—å)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RSSI –ø–æ—Ä—ñ–≥ —É –ø—Ä–æ—Ñ—ñ–ª—ñ

### –ü—Ä–æ–±–ª–µ–º–∞: –ß–∞—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RSSI - –º–æ–∂–ª–∏–≤–æ —Å–∏–≥–Ω–∞–ª —Å–ª–∞–±–∫–∏–π
2. –ó–±—ñ–ª—å—à—Ç–µ –º–∞–∫—Å–∏–º—É–º —Ä–µ–∫–æ–Ω–µ–∫—Ç—ñ–≤
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —è–∫—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (—è–∫—â–æ –≤–ø–ª–∏–≤–∞—î)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–≤—ñ–ª—å–Ω–∏–π —Ä–µ–∫–æ–Ω–µ–∫—Ç

1. –ó–º–µ–Ω—à—Ç–µ `reconnectInitialDelay`
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ `fast` –ø—Ä–æ—Ñ—ñ–ª—å
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ –¥–æ—Å—è–≥–Ω—É—Ç–æ –º–∞–∫—Å–∏–º—É–º —Å–ø—Ä–æ–±

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è: `src/config/adaptiveConnectionConfig.ts`
- –ú–µ–Ω–µ–¥–∂–µ—Ä: `src/hooks/useAdaptiveConnectionManager.ts`
- BLE Hook: `src/hooks/useAdaptiveBleScan.ts`
- UI: `src/components/EnhancedConnectionStatus/`

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ:** 2025-11-17
**–í–µ—Ä—Å—ñ—è:** 1.0.0
